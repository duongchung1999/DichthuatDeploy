(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1095:function(e,t,n){Promise.resolve().then(n.bind(n,6304))},3216:function(e,t,n){"use strict";var o=n(2265);let r=[{background:"#192A51",color:"#FFFFFF",primaryColor:"#967AA1"},{background:"#1A1A2E",color:"#FFFFFF",primaryColor:"#0F3460"},{background:"#461220",color:"#FFFFFF",primaryColor:"#E94560"},{background:"#F7B267",color:"#000000",primaryColor:"#F4845F"},{background:"#F25F5C",color:"#000000",primaryColor:"#642B36"},{background:"#231F20",color:"#FFF",primaryColor:"#BB4430"}],c=e=>{let t=document.querySelector(":root");t.style.setProperty("--background",e.background),t.style.setProperty("--color",e.color),t.style.setProperty("--primary-color",e.primaryColor),t.style.setProperty("--glass-color",e.glassColor)};t.Z=()=>((0,o.useEffect)(()=>{let e=document.querySelector(".theme-btn-container");r.forEach(t=>{let n=document.createElement("div");n.className="theme-btn",n.style.cssText="background: ".concat(t.background,"; width: 25px; height: 25px"),e.appendChild(n),n.addEventListener("click",()=>c(t))})},[]),null)},6304:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n(7437),r=n(2265);n(4843);var c=n(3216),i=n(4379),s=n.n(i),a=n(7796),l=n(5606),u=n(7138),h=n(6648);class d extends r.Component{componentDidMount(){localStorage.getItem("token")&&this.setState({user:!0}),window.addEventListener("click",this.playAudio)}setWithExpiry(e,t,n){let o={value:t,expiry:new Date().getTime()+n};localStorage.setItem(e,JSON.stringify(o))}getWithExpiry(e){let t=localStorage.getItem(e);if(!t)return null;let n=JSON.parse(t);return new Date().getTime()>n.expiry?(localStorage.removeItem(e),null):n.value}render(){let{user:e,error:t,showPassword:n}=this.state;return(0,o.jsxs)("section",{className:"container-show",children:[(0,o.jsxs)("div",{className:"login-container",children:[t&&(0,o.jsx)("p",{children:t.message}),(0,o.jsx)("div",{className:"circle circle-one"}),(0,o.jsxs)("div",{className:"form-container",children:[(0,o.jsx)(h.default,{src:a.Z,alt:"illustration",className:"illustration"}),(0,o.jsx)("h1",{className:"opacity",children:"Luyện dịch"}),(0,o.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"text",name:"username",placeholder:"T\xean đăng nhập"})}),(0,o.jsxs)("div",{className:"input-password",children:[(0,o.jsx)("input",{type:n?"text":"password",name:"password",placeholder:"Mật khẩu"}),(0,o.jsx)("div",{className:n?"hide":"positsionPassword",onClick:this.togglePasswordVisibility,children:(0,o.jsx)("i",{className:"fa-solid fa-eye"})}),(0,o.jsx)("div",{className:n?"positsionPassword":"hide",onClick:this.togglePasswordVisibility,children:(0,o.jsx)("i",{className:"fa-regular fa-eye-slash"})})]}),(0,o.jsx)("button",{type:"submit",className:"opacity",children:"Đăng nhập"})]}),(0,o.jsxs)("div",{className:"register-forget opacity",children:[(0,o.jsx)(u.default,{href:"/register",children:"Đăng k\xfd"}),(0,o.jsx)("a",{href:"",children:"Qu\xean mật khẩu"})]})]}),(0,o.jsx)("div",{className:"circle circle-two"})]}),(0,o.jsx)("div",{className:"theme-btn-container"}),(0,o.jsx)(c.Z,{}),(0,o.jsx)("audio",{ref:e=>this.audioRef=e,src:"/_next/static/files/guzheng2.mp3"})]})}constructor(...e){super(...e),this.state={user:null,error:null,showPassword:!1},this.togglePasswordVisibility=()=>{this.setState(e=>({showPassword:!e.showPassword}))},this.playAudio=()=>{this.audioRef&&(this.audioRef.play(),window.removeEventListener("click",this.playAudio))},this.handleSubmit=async e=>{e.preventDefault();let t=new FormData(e.target),n=t.get("username"),o=t.get("password");try{let e=await this.getInfo("/users/account/".concat(n,"/username")),t=await this.getInfo("/users/account/".concat(n,"/password")),r=await this.getInfo("/users/account/".concat(n,"/name")),c=await this.getInfo("/users/account/".concat(n,"/email")),i=await this.getInfo("/users/account/".concat(n,"/role")),a=await this.getInfo("/users/account/".concat(n,"/img"));if(e){if(t===o)localStorage.setItem("user",e),localStorage.setItem("name",r),localStorage.setItem("email",c),i&&localStorage.setItem("role",i),a&&localStorage.setItem("userImage",a),s().fire({position:"center",icon:"success",title:"Login Success",showConfirmButton:!1,timer:1500}),this.setState({user:!0});else{let e={message:"Mật khẩu kh\xf4ng ch\xednh x\xe1c, vui l\xf2ng thử lại"};s().fire({position:"center",icon:"info",title:e.message,showConfirmButton:!1,timer:1500}),this.setState({error:e})}}else{let e={message:"Người d\xf9ng kh\xf4ng tồn tại"};s().fire({position:"center",icon:"info",title:e.message,showConfirmButton:!1,timer:1500}),this.setState({error:e})}}catch(t){let e={message:"Lỗi đăng nhập: "+t.message};s().fire({position:"center",icon:"info",title:t.message,showConfirmButton:!1,timer:1500}),this.setState({error:e})}},this.getInfo=async e=>{try{let t=await (0,l.F3)(e);if(null!==t)return console.log("data return:",t),t}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}}}var g=d},5606:function(e,t,n){"use strict";n.d(t,{F3:function(){return g},Gd:function(){return p},Je:function(){return s},Pf:function(){return l},Tn:function(){return a},UD:function(){return f},VP:function(){return d},Z6:function(){return h},_g:function(){return u},eO:function(){return m},kX:function(){return x}});var o=n(5236);n(9675);var r=n(516);let c=(0,o.ZF)({apiKey:"AIzaSyD9IyIValBX6xooTZ3wsBPfKsyYvNwAWik",authDomain:"dichchuhan-55a4d.firebaseapp.com",databaseURL:"https://dichchuhan-55a4d-default-rtdb.firebaseio.com",projectId:"dichchuhan-55a4d",storageBucket:"dichchuhan-55a4d.appspot.com",messagingSenderId:"589658521880",appId:"1:589658521880:web:65694d6b4f17f4ca6b1e6d",measurementId:"G-G02KSBMR52"}),i=(0,r.N8)(c);function s(){var e=document.getElementById("fileList").value,t=document.querySelector(".content-right").value,n={[e]:t},o="/users/user1/kecheng/".concat(e),c="/users/user1/contents/".concat(e),s=(0,r.iH)(i,c);(0,r.t8)(s,n).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),s=(0,r.iH)(i,o),n={[e]:t=document.querySelector(".content-left").value},(0,r.t8)(s,n).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}function a(e){var t={[e]:"".concat(e," phần dịch")},n="/users/user1/kecheng/".concat(e),o="/users/user1/contents/".concat(e),c=(0,r.iH)(i,o);(0,r.t8)(c,t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu b\xe0i dịch:",e)}),c=(0,r.iH)(i,n),t={[e]:"".concat(e," 中文")},(0,r.t8)(c,t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được ghi th\xe0nh c\xf4ng l\xean Firebase.")}).catch(e=>{console.error("Lỗi khi ghi dữ liệu kecheng:",e)})}async function l(e,t){var n=(0,r.iH)(i,e);try{return await (0,r.t8)(n,t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function u(e){var t=(0,r.iH)(i,"/users/user1/contents/".concat(e));(0,r.Od)(t).then(()=>{console.log("Dữ liệu b\xe0i dịch đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu b\xe0i dịch:",e)}),t=(0,r.iH)(i,"/users/user1/kecheng/".concat(e)),(0,r.Od)(t).then(()=>{console.log("Dữ liệu kecheng đ\xe3 được x\xf3a th\xe0nh c\xf4ng từ Firebase.")}).catch(e=>{console.error("Lỗi khi x\xf3a dữ liệu kecheng:",e)})}async function h(e){var t=(0,r.iH)(i,e);try{return await (0,r.Od)(t),!0}catch(e){throw console.error("C\xf3 lỗi xảy ra:",e),e}}function d(){var e=document.getElementById("fileList").value,t="/users/user1/kecheng/".concat(e,"/").concat(e),n="/users/user1/contents/".concat(e,"/").concat(e);console.log(t),console.log(g(n)),g(n).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),g(t).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}function g(e){return new Promise((t,n)=>{var o=(0,r.iH)(i,e);(0,r.U2)(o).then(e=>{e.exists()?t(e.val()):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),t(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),n(e)})})}async function m(e){var t=(0,r.iH)(i,e);try{var n=await (0,r.U2)(t);if(n.exists())return n.val();return console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),null}catch(e){return console.error("Lỗi khi đọc dữ liệu:",e),null}}function f(e){return new Promise((t,n)=>{var o=(0,r.iH)(i,e);(0,r.U2)(o).then(e=>{e.exists()?t(Object.entries(e.val()).map(e=>{let[t,n]=e;return{key:t,value:n}})):(console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y."),t(null))}).catch(e=>{console.error("Lỗi khi đọc dữ liệu:",e),n(e)})})}let y="users/user1/contents";async function p(){let e=(0,r.iH)(i,y),t=await (0,r.U2)(e);t.exists()?(v(Object.keys(t.val())),d()):console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}async function x(e){let t=(0,r.iH)(i,y),n=await (0,r.U2)(t);if(n.exists()){var o,c;v(Object.keys(n.val())),o="/users/user1/kecheng/".concat(e,"/").concat(e),c="/users/user1/contents/".concat(e,"/").concat(e),document.getElementById("fileList").value=e,g(c).then(e=>{null!==e&&(document.querySelector(".content-right").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)}),g(o).then(e=>{null!==e&&(document.querySelector(".content-left").value=e)}).catch(e=>{console.error("C\xf3 lỗi xảy ra:",e)})}else console.log("Kh\xf4ng c\xf3 dữ liệu tại đường dẫn n\xe0y.")}function v(e){let t=document.getElementById("fileList");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(e=>{let n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})}},4843:function(){},7796:function(e,t){"use strict";t.Z={src:"/_next/static/media/phat3.d6a20f0b.png",height:708,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAnklEQVR42mOQlpZlBmIGcwtrWUVFFU8gZgADRUUlV0lJqXVCQiIbgZiBQUZG1kJIWGSXmJj4eSDeJC+vFMwgLiGtKyMj16Cqqj5FXFzilIyMQhLDtJnzWB2d3KU0NLStFBVVS4CYgaGktIIHiBm0tXW1dHX0fYCYgaG/r4/l9JlzbEZGpgZA7ArEDAx1NbWMTS3tPCGhEYKBgaEgzAAA8ksjoENUW7AAAAAASUVORK5CYII=",blurWidth:5,blurHeight:8}}},function(e){e.O(0,[582,461,481,138,885,648,971,23,744],function(){return e(e.s=1095)}),_N_E=e.O()}]);